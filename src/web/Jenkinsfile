//@Library('pipeline-library')

Map tasks = [failFast: false]

tasks['x86'] = { ->
    node {
        multiArchFlow('x86')
    }
}
tasks['arm'] = { ->
    node {
        multiArchFlow('arm')
    }
}

// Run both task in parallel
parallel(tasks)

def multiArchFlow(String arch) {

    stage('Download tooling') {
        currentStage = STAGE_NAME
        sh "echo download tooling"
    }
}

/*def multiArchFlow(String arch) {

    tech = "nodejs"

    checkout(tech)
    
    downloadTooling(tech)

    build(tech)
}*/